/* =================================
   1. CONFIGURAÇÕES GLOBAIS E TEMA
   ================================= */

@import url('https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=Caveat:wght@400;700&display=swap');

:root {
    --title-font: "Uncial Antiqua", cursive;
    --diary-font: "Caveat", cursive;
    --standard-font: Arial, sans-serif;
    
    --text-color: #3a2b23;
    --link-color: #6a3d3d;
    --link-hover-color: #8b0000;
    --paper-color: #d8c9b3;
    --cover-color: #2a2a2a;
    --watermark-color: rgba(61, 43, 31, 0.08);
}

/* --- Reset e Estilos Base --- */
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--diary-font); background-color: #1a1a1a; background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png'); color: var(--text-color); overflow: hidden; }


/* =================================
   2. LAYOUT PRINCIPAL E DIÁRIO
   ================================= */

.game-container { display: flex; justify-content: center; align-items: center; min-height: 100vh; }
#diary { position: relative; width: 90vw; max-width: 1400px; height: 90vh; box-shadow: 0 20px 50px rgba(0,0,0,0.6); background-color: var(--cover-color); background-image: url('https://www.transparenttextures.com/patterns/large-leather.png'); border-radius: 8px; padding: 2.5%; }
#diary::before { content: ''; position: absolute; top: 0; left: 50%; width: 20px; height: 100%; transform: translateX(-50%); background: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.3) 15%, transparent 25%, transparent 75%, rgba(0,0,0,0.3) 85%, transparent 100%); z-index: 5; opacity: 0.8; }
#paginas-container { position: relative; display: flex; width: 100%; height: 100%; box-shadow: inset 0 0 25px rgba(0,0,0,0.5); z-index: 10; }


/* =================================
   3. ESTRUTURA E CONTEÚDO DAS PÁGINAS
   ================================= */

.page {
    flex: 1 1 50%;
    position: relative;
    display: flex;
    flex-direction: column;
    padding: 2.5rem 3.5rem;
    background-color: var(--paper-color);
    background-image: url('https://www.transparenttextures.com/patterns/old-paper-2.png');
}

/* CORREÇÃO: Sombra interna para a página esquerda (lombada) */
#left-page {
    box-shadow: inset -10px 0px 15px -10px rgba(0, 0, 0, 0.4);
}

#right-page-container {
    padding: 0;
    perspective: 2500px;
    background: none;
    box-shadow: none;
}
#right-page-container.em-primeiro-plano { z-index: 100; }

.content { position: relative; z-index: 2; flex-grow: 1; text-align: justify; line-height: 2.2; font-size: 20px; overflow-y: auto; }
#paginas-container h1 { font-family: var(--title-font); font-weight: normal; font-size: 2.5rem; margin-bottom: 2rem; line-height: 1.1; text-align: left; border-bottom: 1px solid rgba(61, 43, 31, 0.2); padding-bottom: 1rem; color: var(--text-color); }
.face.verso .content h1 { color: #876d5c; }
.watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: var(--title-font); font-size: 3rem; white-space: nowrap; color: var(--watermark-color); z-index: 1; pointer-events: none; }
.footer-left, .footer-right { position: absolute; bottom: 2.5rem; font-size: 1rem; color: #a89f8d; z-index: 2; font-family: var(--standard-font); font-style: italic; }
.footer-left { left: 3.5rem; }
.footer-right { right: 3.5rem; }


/* =================================
   4. ANIMAÇÕES E FACES
   ================================= */

@keyframes virarPaginaSolida {
    from { transform: rotateY(0deg); }
    to   { transform: rotateY(-180deg); }
}

.pagina-direita-efeito { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform-origin: left; transform-style: preserve-3d; will-change: transform; }
.pagina-topo { z-index: 10; }
.pagina-fundo { z-index: 5; }

.face {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 2.5rem 3.5rem;
    backface-visibility: hidden;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background-color: var(--paper-color);
    background-image: url('https://www.transparenttextures.com/patterns/old-paper-2.png');
    /* CORREÇÃO: Sombra interna para a página direita (lombada) */
    box-shadow: inset 10px 0px 15px -10px rgba(0, 0, 0, 0.4);
}

.face.verso {
    transform: rotateY(180deg);
    position: relative;
}
.face.verso .watermark, .face.verso .footer-left, .face.verso .footer-right { position: absolute; }

.virando {
    animation: virarPaginaSolida 1.2s ease-out forwards;
    /* CORREÇÃO: A sombra agora é interna (inset) para um efeito de profundidade mais realista */
    box-shadow: inset -10px 0 25px -10px rgba(0,0,0,0.4);
}


/* =================================
   5. ELEMENTOS DE INTERAÇÃO E MODAL
   ================================= */
/* ... (O resto do CSS para o Modal e UI permanece o mesmo) ... */
.choices { margin-top: 1rem; flex-shrink: 0; padding-top: 1rem; border-top: 1px solid rgba(61, 43, 31, 0.1); }
.choices button { display: block; width: 100%; padding: 0.8rem 0; margin-bottom: 0.5rem; font-family: var(--diary-font); font-size: 22px; font-weight: bold; text-align: left; background: transparent; border: none; color: var(--link-color); cursor: pointer; transition: color 0.3s; }
.choices button:hover { color: var(--link-hover-color); }
.page-flipper { text-align: right; margin-top: auto; padding-top: 1rem; flex-shrink: 0; }
.next-page-btn { font-family: var(--diary-font); font-size: 18px; font-weight: bold; background: none; border: none; color: var(--link-color); cursor: pointer; }
.hidden { display: none !important; }
#options-btn { position: fixed; top: 20px; right: 20px; padding: 10px 20px; background-color: rgba(255,255,255,0.8); color: #333; border: 1px solid #ccc; border-radius: 5px; cursor: pointer; z-index: 2001; }
#modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 1999; }
#options-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 600px; max-height: 80vh; background-color: #f0f0f0; color: #333; padding: 2rem; border-radius: 10px; z-index: 2000; overflow-y: auto; }
#close-modal-btn { position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 2rem; line-height: 1; cursor: pointer; color: #888; }
.modal-content section { margin-bottom: 1rem; border-top: 1px solid #ccc; padding-top: 1rem; }
.slot-list { list-style: none; }
.slot-list li { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0.5rem; background-color: #fff; border-bottom: 1px solid #eee; }